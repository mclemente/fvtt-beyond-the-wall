<form class="{{cssClass}} flexcol" autocomplete="off">
	{{> "btw.actor-header" }}

	<nav class="sheet-tabs tabs flexrow" data-group="primary">
		<a class="item" data-tab="features">Features</a>
		<a class="item" data-tab="class">Class Features</a>
		<a class="item" data-tab="items">Equipment</a>
		<a class="item" data-tab="notes">Notes</a>
		{{!-- <a class="item" data-tab="effects">Efeitos</a> --}}
	</nav>

	<section class="sheet-body flexrow">
		<div class="tab features flexrow" data-group="primary" data-tab="features">
			<div class="left-side">
				<div class="abilities flexcol">
					{{#each abilities as | ability id | }}
					<div class="flexrow">
						<div class="ability flexcol">
							<label>{{ability.label}}</label>
							<input type="number" name="system.abilities.{{id}}.value" value="{{ability.value}}" min="1" class="ability-score" placeholder="10" data-dtype="Number">
						</div>
						<div class="ability-modifiers flexrow">
							<span class="ability-mod" data-tooltip="BTW.Modifier">
								{{numberFormat ability.mod decimals=0 sign=true}}
							</span>
						</div>
						<div class="ability-features flexcol">
							{{#each ability.features}}
							<span>{{this}}</span>
							{{/each}}
						</div>
					</div>
					{{/each}}
				</div>
				<hr>
				<div class="saves flexrow">
					{{#each saves as | save id |}}
					<div class="save flexcol">
						<label>{{save.label}}</label>
						<div class="save-wrapper">
							<input type="number" name="system.saves.{{id}}.value" value="{{save.value}}" placeholder="20" data-dtype="Number">
						</div>
					</div>
					{{/each}}
				</div>
			</div>

			<div class="spacer flexrow"></div>

			<div class="right-side">
				<div class="right-fields flexrow">
					<div class="flexcol">
						<input type="number" name="system.ac" value="{{system.ac}}" placeholder="10" data-dtype="Number" />
						<label>Armor Class</label>
					</div>
					{{#if (eq actor.type "character")}}
					<div class="flexcol">
						<input type="number" name="system.fortunePoints.value" value="{{system.fortunePoints.value}}"
							data-dtype="Number" min="0" />
						<label>Fortune Points</label>
					</div>
					{{/if}}
					<div class="flexcol">
						<div class="hp flexrow">
							<input type="number" name="system.hp.value" value="{{system.hp.value}}" data-dtype="Number" />
							<input type="number" name="system.hp.max" value="{{system.hp.max}}" data-dtype="Number" />
						</div>
						<label>Hit Points</label>
					</div>
				</div>
				<hr>
				<div class="skills">
					<div class="item-titles flexrow">
						<div class="item-name">Skills</div>
						<div class="item-controls">
							<a class="item-control item-create" data-type="skill"><i class="fa fa-plus"></i></a>
						</div>
					</div>
					{{#each skills as | skill |}}
					<div class="item flexrow" data-item-id="{{skill._id}}">
						<div class="item-name item-rollable">
							<a class="skill-roll"  data-tooltip="{{skill.system.description~}}">
								{{skill.name}} ({{#if skill.abl}}{{skill.abl}} {{/if}}{{numberFormat skill.system.bonus decimals=0 sign=true}})
							</a>
						</div>
						<div class="item-controls">
							<a class="item-control item-edit" title="Edit"><i class="fas fa-edit"></i></a>
							<a class="item-control item-delete" title="Delete"><i class="fas fa-trash"></i></a>
						</div>
					</div>
					{{/each}}
				</div>
			</div>
		</div>

		<div class="tab class flexrow" data-group="primary" data-tab="class">
			<div class="details-sidebar">
				<div class="form-group">
					<label>Armor: {{class.system.armor}}</label>
				</div>
				<div class="form-group">
					<label>Initiative Bonus: {{class.system.initiative}}</label>
				</div>
				<div class="form-group">
					<label>Hit Dice: {{class.system.hd}}</label>
				</div>
			</div>
			<div class="class-abilities">
				{{editor abilitiesHTML editable=false }}
			</div>
		</div>

		<div class="tab items" data-group="primary" data-tab="items">
			<section class="items-list inventory-list" data-item-list="inventory">
			{{#each itemList as | data il |}}
			<div class="items-section card" data-type="{{il}}">
				<div class="items-header header">
					<h3 class="item-name">{{lookup ../config.itemTypes il}}</h3>
					<div class="item-header item-controls"></div>
				</div>
				{{#each data as | item |}}
				<ol class="item-list unlist">
					<li class="item collapsible collapsed" data-item-id="{{item._id}}" draggable="true">
						<div class="item-row">
							<div class="item-name item-action item-tooltip rollable" role="button" data-action="use">
								<img class="item-image gold-icon" src="{{item.img}}" alt="{{item.name}}">
								<div class="name name-stacked">
									<span class="title">{{item.name}}</span>
								</div>
							</div>

							<div class="item-detail item-controls">
								{{#if (eq item.type (or "equipment" "weapon"))}}
								<a class="item-control item-equip {{#if item.system.equipped}}active{{/if}}"
									data-tooltip="{{#if item.system.equipped}}BTW.Equipped{{else}}BTW.Unequipped{{/if}}"
								>
									<i class="fas fa-hand"></i>
								</a>
								{{/if}}
								<a class="item-control item-edit" title="Edit"><i class="fas fa-edit"></i></a>
								<a class="item-control item-delete" title="Delete"><i class="fas fa-trash"></i></a>
							</div>
						</div>
					</li>
				</ol>
				{{/each}}
			</div>
			{{/each}}
			</section>
		</div>

		<div class="tab notes flexcol" data-group="primary" data-tab="notes">
			{{editor descriptionHTML target="system.notes" button=true editable=editable
					engine="prosemirror" collaborate=false}}
		</div>

	</section>
</form>